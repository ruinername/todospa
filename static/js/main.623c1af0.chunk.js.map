{"version":3,"sources":["modules/editor/actionTypes.js","modules/firebase/actionTypes.js","modules/firebase/actions.js","modules/editor/actions.js","modules/editor/reducer.js","modules/firebase/reducer.js","modules/index.js","store.js","containers/home/index.js","containers/app/index.js","index.js"],"names":["SAVE_DATA","GET_DATA","SAVE_TOKEN","GET_TOKEN","SAVE_UID","GET_UID","authFirebase","_ref2","Object","asyncToGenerator","regenerator_default","a","mark","_callee2","dispatch","getState","state","token","res","wrap","_context2","prev","next","firebase","auth","createUserWithEmailAndPassword","concat","sent","t0","signInWithEmailAndPassword","type","types","uid","user","stop","_x3","_x4","apply","this","arguments","saveData","data","_ref","_callee","_context","_ref3","_callee3","_context3","database","ref","set","editor","error","_x5","_x6","_x","initialState","Immutable","aboutTooltip","combineReducers","length","undefined","action","localStorage","JSON","stringify","merge","parse","time","blocks","text","level","version","react_default","createElement","react_editorjs_umd_default","autofocus","holderId","onChange","onReady","console","log","queryString","require","history","History","middleware","thunk","routerMiddleware","initializeApp","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","composedEnhancers","compose","applyMiddleware","store","createStore","connectRouter","rootReducer","params","window","location","search","_x2","uuidv4","_ref4","_callee4","_context4","abrupt","once","then","snapshot","val","force","_x7","_x8","connect","bindActionCreators","onClick","qrSvg","vkQr","createQR","qrSize","isShowLogo","style","textAlign","width","margin","marginBottom","dangerouslySetInnerHTML","__html","showQr","App","react_router","exact","path","component","Home","target","document","querySelector","render","es","lib","app"],"mappings":"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","file":"static/js/main.623c1af0.chunk.js","sourcesContent":["export const SAVE_DATA = 'editor.saveData';\nexport const GET_DATA = 'editor.getData';","export const SAVE_USER = 'firebase.saveUser';\nexport const SAVE_TOKEN = 'firebase.saveToken';\nexport const GET_TOKEN = 'firebase.getToken';\nexport const SAVE_UID = 'firebase.saveUid';\nexport const GET_UID = 'firebase.getUid';","import * as types from './actionTypes';\nimport uuidv4 from 'uuid/v4';\nimport firebase from 'firebase';\nimport { SAVE_DATA } from '../editor/actionTypes'\n\nexport function saveUser() {\n  return async (dispatch, getState) => {\n    let state = getState();\n    if(!state.firebase.token){\n      let token = uuidv4();\n      dispatch({type: types.SAVE_TOKEN, token});\n    }\n  };\n}\n\nexport function authFirebase() {\n  return async (dispatch, getState) => {\n    let state = getState();\n    const token = state.firebase.token;\n    let res;\n    try {\n      res = await firebase.auth().createUserWithEmailAndPassword(`${token}@voloshinskii.ru`, token);\n    }\n    catch (e) {\n      res = await firebase.auth().signInWithEmailAndPassword(`${token}@voloshinskii.ru`, token);\n    }\n    dispatch({type: types.SAVE_UID, uid: res.user.uid});\n  };\n}\n\nexport function saveInFirebase() {\n  return async (dispatch, getState) => {\n    let state = getState();\n    const uid = state.firebase.uid;\n    firebase.database().ref('users/' + uid).set({\n      data: state.editor.data\n    }, function(error) {\n      if (error) {\n        // The write failed...\n      } else {\n        // Data saved successfully!\n      }\n    });\n  }\n}\n\nexport function getFromFirebase() {\n  return async (dispatch, getState) => {\n    let state = getState();\n    const uid = state.firebase.uid;\n    if(uid){\n      return firebase.database().ref('/users/' + uid).once('value').then(function(snapshot) {\n        let data = snapshot.val();\n        dispatch({type: SAVE_DATA, data: data.data, force: true});\n      });\n    }\n  }\n}","import * as types from './actionTypes';\nimport { saveInFirebase } from '../firebase/actions'\n\nexport function saveData(data) {\n  return async (dispatch) => {\n    dispatch({ type: types.SAVE_DATA, data });\n    dispatch(saveInFirebase());\n  };\n}\n\nexport function getData() {\n  return async (dispatch) => {\n    dispatch({ type: types.GET_DATA });\n  };\n}","import React from 'react';\nimport Immutable from 'seamless-immutable';\n\nimport * as types from './actionTypes';\nimport Editor from '@stfy/react-editor.js'\nimport { saveData } from './actions'\n\nconst initialState = Immutable({\n  aboutTooltip: true,\n});\n\nexport default function reduce(state = initialState, action = {}) {\n  switch (action.type) {\n    case types.SAVE_DATA:\n      localStorage['data'] = JSON.stringify(action.data);\n      return state.merge({\n        data: action.data,\n      });\n    case types.GET_DATA:\n      let data = (localStorage['data'] && JSON.parse(localStorage['data'])) || {\n        \"time\" : 1554920381017,\n        \"blocks\" : [\n          {\n            \"type\" : \"header\",\n            \"data\" : {\n              \"text\" : \"Hello world!\",\n              \"level\" : 2\n            }\n          },\n        ],\n        \"version\" : \"2.12.4\"\n      };\n      function editor(saveData){\n        return <Editor\n          autofocus\n          holderId=\"editorjs-container\"\n          onChange={(data) => saveData(data)}\n          onReady={() => console.log('Start!')}\n          data={data}\n        />\n      }\n      return state.merge({\n        data,\n        editor\n      });\n    default:\n      return state;\n  }\n}","import React from 'react';\nimport Immutable from 'seamless-immutable';\nimport * as types from './actionTypes';\n\nconst initialState = Immutable({});\n\nexport default function reduce(state = initialState, action = {}) {\n  switch (action.type) {\n    case types.SAVE_TOKEN:\n      localStorage['token'] = action.token;\n      return state.merge({\n        token: action.token,\n      });\n    case types.GET_TOKEN:\n      let token = localStorage['token'];\n      return state.merge({\n        token\n      });\n    case types.SAVE_UID:\n      localStorage['uid'] = action.uid;\n      return state.merge({\n        uid: action.uid\n      });\n    case types.GET_UID:\n      let uid = localStorage['uid'];\n      return state.merge({\n        uid\n      });\n    default:\n      return state;\n  }\n}","import { combineReducers } from 'redux'\nimport editor from './editor/reducer'\nimport firebase from './firebase/reducer'\n\nexport default combineReducers({\n  editor,\n  firebase\n})\n","import { createStore, applyMiddleware, compose } from 'redux'\nimport { connectRouter, routerMiddleware } from 'connected-react-router'\nimport thunk from 'redux-thunk'\nimport * as History from 'history'\nimport rootReducer from './modules'\nimport { getData } from './modules/editor/actions'\nimport { getFromFirebase, saveUser } from './modules/firebase/actions'\nimport firebase from 'firebase'\nimport * as types from './modules/firebase/actionTypes'\nconst queryString = require('query-string');\n\nexport const history = History.createBrowserHistory()\n\nconst initialState = {}\nconst enhancers = []\nconst middleware = [thunk, routerMiddleware(history)]\n\nconst firebaseConfig = {\n  apiKey: \"AIzaSyC1Ae16VeG_VHqZQXWLNxY9oUe5bmAQATM\",\n  authDomain: \"todo-f5cb1.firebaseapp.com\",\n  databaseURL: \"https://todo-f5cb1.firebaseio.com\",\n  projectId: \"todo-f5cb1\",\n  storageBucket: \"\",\n  messagingSenderId: \"294517743961\",\n  appId: \"1:294517743961:web:f9bdc8d11ede7b3cc3ec48\"\n};\n// Initialize Firebase\nfirebase.initializeApp(firebaseConfig);\n\nif (process.env.NODE_ENV === 'development') {\n  const devToolsExtension = window.__REDUX_DEVTOOLS_EXTENSION__\n\n  if (typeof devToolsExtension === 'function') {\n    enhancers.push(devToolsExtension())\n  }\n}\n\nconst composedEnhancers = compose(\n  applyMiddleware(...middleware),\n  ...enhancers\n)\n\nconst store = createStore(\n  connectRouter(history)(rootReducer),\n  initialState,\n  composedEnhancers\n);\n\nconst params = queryString.parse(window.location.search);\nif(params.uid) store.dispatch({type: types.SAVE_UID, uid: params.uid});\n\nstore.dispatch({type: 'firebase.getToken'});\nstore.dispatch({type: 'firebase.getUid'});\nstore.dispatch(getData());\nstore.dispatch(saveUser());\nstore.dispatch(getFromFirebase());\n\nexport default store;\n","import React from 'react';\nimport { bindActionCreators } from 'redux';\nimport { connect } from 'react-redux';\nimport Editor from '@stfy/react-editor.js';\nimport { saveData } from '../../modules/editor/actions';\nimport { authFirebase } from '../../modules/firebase/actions'\nimport vkQr from '@vkontakte/vk-qr';\n\nfunction showQr(uid) {\n  const qrSvg = vkQr.createQR(`https://todo.voloshinskii.ru?uid=${uid}`, {\n    qrSize: 256,\n    isShowLogo: false\n  });\n  return (\n    <div style={{textAlign: 'center'}}>\n      <h2>Share this note</h2>\n      <div style={{width: '256px', margin: 'auto', marginBottom: '10px'}} dangerouslySetInnerHTML={{__html: qrSvg}}/>\n    </div>\n  );\n}\n\nconst Home = ({authFirebase, saveData, data, uid, editor}) => (\n  <div>\n    {!uid && <button onClick={authFirebase}>Sync with other devices</button>}\n    {editor(saveData)}\n    {uid && showQr(uid)}\n  </div>\n)\n\nconst mapStateToProps = ({ editor, firebase }) => ({\n  data: editor.data,\n  uid: firebase.uid,\n  editor: editor.editor\n})\nconst mapDispatchToProps = dispatch =>\n  bindActionCreators(\n    {\n      saveData,\n      authFirebase\n    },\n    dispatch\n  )\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(Home)\n","import React from 'react'\nimport { Route } from 'react-router-dom'\nimport Home from '../home'\nimport firebase from 'firebase'\n\nconst App = () => (\n  <div>\n    <main>\n      <Route exact path=\"/\" component={Home} />\n    </main>\n  </div>\n)\n\nexport default App\n","import React from 'react'\nimport { render } from 'react-dom'\nimport { Provider } from 'react-redux'\nimport { ConnectedRouter } from 'connected-react-router'\nimport store, { history } from './store'\nimport App from './containers/app'\n\nimport 'sanitize.css/sanitize.css'\nimport './index.css'\n\nconst target = document.querySelector('#root')\n\nrender(\n  <Provider store={store}>\n    <ConnectedRouter history={history}>\n      <div>\n        <App />\n      </div>\n    </ConnectedRouter>\n  </Provider>,\n  target\n)\n"],"sourceRoot":""}